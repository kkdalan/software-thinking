 ## 架構度量：微服務架構決策矩陣

在微服務的設計中，**通信模式**和**協調模式**的選擇是決定這些取捨的關鍵因素。每種組合都有其優缺點，選擇合適的組合需要考慮具體的業務需求和系統要求。在強調一致性的情境下，可以選擇同步通信和Orchestration模式的組合；在強調系統可用性和擴展性的情境下，可以選擇異步通信和Choreography模式的組合。其餘兩種組合則在某些特定場景下可能提供折衷的解決方案。

以下是對四種不同組合的比較和分析：

### 架構模式的質化分析

|                    | **Orchestration** | **Choreography** |
|--------------------|-------------------|------------------|
| **同步通信**       | **一致性:** 高 <br> **可用性:** 低 <br> **可維護性:** 高 <br> **開發複雜度:** 高 | **一致性:** 高 <br> **可用性:** 低 <br> **可維護性:** 中 <br> **開發複雜度:** 低 |
| **異步通信**       | **一致性:** 中低 <br> **可用性:** 中高 <br> **可維護性:** 高 <br> **開發複雜度:** 高 | **一致性:** 低 <br> **可用性:** 高 <br> **可維護性:** 中 <br> **開發複雜度:** 低 |

|                             | **一致性** | **可用性** | **可維護性** | **開發複雜度** |
|-----------------------------|------------|------------|--------------|----------------|
| **同步通信 + Orchestration** | 高         | 低         | 高           | 高             |
| **同步通信 + Choreography**  | 高         | 低         | 中           | 低             |
| **異步通信 + Orchestration**  | 中低       | 中高       | 高           | 高             |
| **異步通信 + Choreography**   | 低         | 高       | 中           | 低             |


- **同步通信 + Orchestration模式**
  - **一致性:** 高，通常透過集中控制器確保一致性。
  - **可用性:** 低，集中控制器的失敗可能導致整個系統不可用。
  - **可維護性:** 高，由於集中控制業務流程，修改業務邏輯時容易定位和處理。
  - **開發複雜度:** 高，因為需要設計和實現調度器來控制業務流程。

- **同步通信 + Choreography模式**
  - **一致性:** 高，服務之間的同步通信可以確保數據一致性。
  - **可用性:** 低，由於同步通信特性，某一服務失效可能影響其他服務。
  - **可維護性:** 中，服務之間的直接通信使系統架構難以掌握，但無集中控制點簡化了部分維護工作。
  - **開發複雜度:** 低，開發相對簡單，因為沒有調度器。

- **異步通信 + Orchestration模式**
  - **一致性:** 中低，異步通信可能導致事件延遲或丟失。
  - **可用性:** 中高，系統能在部分服務失效時繼續運行。
  - **可維護性:** 高，集中控制器使業務流程明確，方便問題追蹤和調試。
  - **開發複雜度:** 高，需要考慮事件順序性和異步處理的各種情況。

- **異步通信 + Choreography模式**
  - **一致性:** 低，各個服務獨立處理事件，可能導致數據不一致。
  - **可用性:** 高，松耦合和異步通信允許部分服務失效而不影響整體運行。
  - **可維護性:** 中，沒有集中控制點，問題追蹤和調試困難。
  - **開發複雜度:** 低，服務獨立性強，開發和部署相對簡單。


### 系統用戶與技術人員的關注要點

- **系統用戶:**
   - **可用性:** 用戶期望系統隨時可用，因為系統的可用性直接影響到用戶的日常操作和體驗。用戶不希望因系統故障或中斷而影響工作流程或數據的獲取。
   - **一致性:** 用戶希望他們操作的數據是準確和一致的，尤其是在涉及多個系統或模塊的場景中。一致性確保用戶看到和處理的數據在系統的不同部分是統一的，避免數據錯誤或衝突。

- **技術人員:**
   - **可維護性:** 技術人員需要確保系統的設計是可維護的，這包括模塊化設計、良好的代碼結構和清晰的文檔。這些特性有助於降低未來的維護成本，使得系統更易於修復、擴展和更新。
   - **開發複雜度:** 技術人員關注開發的複雜度，因為過高的複雜度會增加開發的難度和風險。控制複雜度可以提高開發效率，降低錯誤發生的概率，並使得新成員更容易上手。

這些重點反映了系統用戶和技術人員在系統設計和運行中所關心的不同方面，且這些關注點對於系統的成功運行都是至關重要的。


### 四大面向的衡量標準

